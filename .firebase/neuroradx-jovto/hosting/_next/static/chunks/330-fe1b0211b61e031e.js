"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{20330:(e,s,t)=>{t.r(s),t.d(s,{ReportIssueDialog:()=>v});var r=t(95155),a=t(12115),l=t(69606),o=t(85060),i=t(4563),n=t(73312),d=t(51344),c=t(98986),p=t(46754),m=t(33900),u=t(37528),f=t(65564),x=t(44595),g=t(14565),b=t(14505),y=t(27058),h=t(65512);let j=e=>i.Ik({problemType:i.Yj().min(1,e("reportIssueDialog.validation.problemTypeRequired")),description:i.Yj().min(10,e("reportIssueDialog.validation.descriptionMinLength")).max(1e3,e("reportIssueDialog.validation.descriptionMaxLength")),userEmail:i.Yj().email(e("reportIssueDialog.validation.emailInvalid")).optional().or(i.eu(""))}),N=["reportIssueDialog.problemTypes.typoGrammar","reportIssueDialog.problemTypes.confusingQuestion","reportIssueDialog.problemTypes.correctAnswerIncorrect","reportIssueDialog.problemTypes.optionsIncorrect","reportIssueDialog.problemTypes.mediaProblem","reportIssueDialog.problemTypes.displayFormatIssue","reportIssueDialog.problemTypes.explanationIncorrect","reportIssueDialog.problemTypes.other"];function v(e){let{questionId:s,questionStem:t,isOpen:i,onOpenChange:v}=e,{toast:w}=(0,f.dj)(),{t:I}=(0,h.B)(),[D,T]=(0,a.useState)(null),[E,k]=(0,a.useState)(!1),C=j(I),R=(0,l.mN)({resolver:(0,o.u)(C),defaultValues:{problemType:"",description:"",userEmail:""}});(0,a.useEffect)(()=>{let e=(0,g.hg)(x.j2,e=>{T(e),e&&!R.getValues("userEmail")&&R.setValue("userEmail",e.email||"")});return()=>e()},[R]);let A=async e=>{k(!0);let r={questionId:s,questionStem:t,problemType:e.problemType,description:e.description,userProvidedEmail:e.userEmail||null,userId:(null==D?void 0:D.uid)||"anonymous",userEmailFromAuth:(null==D?void 0:D.email)||"anonymous",reporterDisplayName:(null==D?void 0:D.displayName)||((null==D?void 0:D.isAnonymous)?"Anonymous":"N/A"),timestamp:(0,y.O5)(),appVersion:"1.0.0",userAgent:"undefined"!=typeof navigator?navigator.userAgent:"unknown",status:"new"};try{await (0,y.gS)((0,y.rJ)(x.db,"issueReports"),r),w({title:I("reportIssueDialog.toast.reportSuccessTitle"),description:I("reportIssueDialog.toast.reportSuccessDescription"),variant:"success"}),v(!1),R.reset()}catch(e){w({title:I("reportIssueDialog.toast.reportErrorTitle"),description:I("reportIssueDialog.toast.reportErrorDescription"),variant:"destructive"})}finally{k(!1)}},S=!!(D&&D.email&&!D.isAnonymous);return(0,r.jsx)(d.lG,{open:i,onOpenChange:e=>{e||R.reset(),v(e)},children:(0,r.jsxs)(d.Cf,{className:"sm:max-w-[525px]",children:[(0,r.jsxs)(d.c7,{children:[(0,r.jsx)(d.L3,{children:I("reportIssueDialog.title")}),(0,r.jsx)(d.rr,{children:I("reportIssueDialog.description")})]}),(0,r.jsxs)("form",{onSubmit:R.handleSubmit(A),className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"text-sm font-medium",children:[I("reportIssueDialog.questionStemLabel"),":"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground border p-2 rounded-md max-h-24 overflow-y-auto",children:t})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.J,{htmlFor:"problemType",children:I("reportIssueDialog.problemTypeLabel")}),(0,r.jsx)(l.xI,{name:"problemType",control:R.control,render:e=>{let{field:s}=e;return(0,r.jsxs)(u.l6,{onValueChange:s.onChange,value:s.value,children:[(0,r.jsx)(u.bq,{id:"problemType",children:(0,r.jsx)(u.yv,{placeholder:I("reportIssueDialog.problemTypePlaceholder")})}),(0,r.jsx)(u.gC,{children:N.map(e=>(0,r.jsx)(u.eb,{value:e,children:I(e)},e))})]})}}),R.formState.errors.problemType&&(0,r.jsx)("p",{className:"text-xs text-destructive",children:R.formState.errors.problemType.message})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.J,{htmlFor:"description",children:I("reportIssueDialog.descriptionLabel")}),(0,r.jsx)(p.T,{id:"description",placeholder:I("reportIssueDialog.descriptionPlaceholder"),...R.register("description"),rows:4}),R.formState.errors.description&&(0,r.jsx)("p",{className:"text-xs text-destructive",children:R.formState.errors.description.message})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(c.J,{htmlFor:"userEmail",children:I("reportIssueDialog.userEmailLabel")}),(0,r.jsx)(m.p,{id:"userEmail",type:"email",placeholder:I("reportIssueDialog.userEmailPlaceholder"),...R.register("userEmail"),disabled:S,className:S?"bg-muted/50 cursor-not-allowed":""}),R.formState.errors.userEmail&&(0,r.jsx)("p",{className:"text-xs text-destructive",children:R.formState.errors.userEmail.message})]}),(0,r.jsxs)(d.Es,{children:[(0,r.jsx)(d.HM,{asChild:!0,children:(0,r.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>v(!1),children:I("common.cancel")})}),(0,r.jsxs)(n.$,{type:"submit",disabled:E,children:[E&&(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),I("reportIssueDialog.submitButton")]})]})]})]})})}},51344:(e,s,t)=>{t.d(s,{Cf:()=>u,Es:()=>x,HM:()=>p,L3:()=>g,c7:()=>f,lG:()=>n,rr:()=>b,zM:()=>d});var r=t(95155),a=t(12115),l=t(66217),o=t(40767),i=t(21567);let n=l.bL,d=l.l9,c=l.ZL,p=l.bm,m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a})});m.displayName=l.hJ.displayName;let u=a.forwardRef((e,s)=>{let{className:t,children:a,...n}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(l.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[a,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.UC.displayName;let f=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};f.displayName="DialogHeader";let x=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};x.displayName="DialogFooter";let g=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...a})});g.displayName=l.hE.displayName;let b=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});b.displayName=l.VY.displayName},33900:(e,s,t)=>{t.d(s,{p:()=>o});var r=t(95155),a=t(12115),l=t(21567);let o=a.forwardRef((e,s)=>{let{className:t,type:a,...o}=e;return(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...o})});o.displayName="Input"},98986:(e,s,t)=>{t.d(s,{J:()=>d});var r=t(95155),a=t(12115),l=t(46195),o=t(40652),i=t(21567);let n=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.b,{ref:s,className:(0,i.cn)(n(),t),...a})});d.displayName=l.b.displayName},37528:(e,s,t)=>{t.d(s,{bq:()=>m,eb:()=>g,gC:()=>x,l6:()=>c,mi:()=>b,yv:()=>p});var r=t(95155),a=t(12115),l=t(63409),o=t(51719),i=t(91902),n=t(98867),d=t(21567);let c=l.bL;l.YJ;let p=l.WT,m=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(o.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});u.displayName=l.PP.displayName;let f=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});f.displayName=l.wn.displayName;let x=a.forwardRef((e,s)=>{let{className:t,children:a,position:o="popper",...i}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...i,children:[(0,r.jsx)(u,{}),(0,r.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(f,{})]})})});x.displayName=l.UC.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=l.JU.displayName;let g=a.forwardRef((e,s)=>{let{className:t,children:a,...o}=e;return(0,r.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:a})]})});g.displayName=l.q7.displayName;let b=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...a})});b.displayName=l.wv.displayName},46754:(e,s,t)=>{t.d(s,{T:()=>o});var r=t(95155),a=t(12115),l=t(21567);let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...a})});o.displayName="Textarea"}}]);